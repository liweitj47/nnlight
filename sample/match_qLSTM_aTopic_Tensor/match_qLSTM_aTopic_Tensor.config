[paramlist]
hidden_size = 32
tensor_output_size = 32
rank = 1
l2-norm = 0.0
margin = 0.2


[input]
name = questions
shape = 3

[input]
name = answers
shape = 2

[input]
name = answers_neg
shape = 2

[input]
name = questions_mask
shape = 2


[layer]
name = lstm_layer
type = lstm
x = questions
mask = questions_mask
hidden = hidden_size

[layer]
name = answer_hidden_layer
type = simple
x = answers
hidden = hidden_size

[layer]
name = tensor_layer
type = low_rank_tensor
left = lstm_layer.last
right = answer_hidden_layer
hidden = tensor_output_size
rank = rank

[layer]
name = output_layer
type = logistic
x = tensor_layer


[layer]
name = answer_hidden_layer_neg
type = simple
x = answers_neg
hidden = hidden_size

[layer]
name = tensor_layer_neg
type = low_rank_tensor
left = lstm_layer.last
right = answer_hidden_layer_neg
hidden = tensor_output_size
rank = 1
 
[layer]
name = output_layer_neg
type = logistic
x = tensor_layer_neg

[loss]
name = max_margin_loss
type = max_margin_loss
positive = output_layer
negative = output_layer_neg
margin = margin

[training]
loss = max_margin_loss
learning_rate = 0.2
outputs = max_margin_loss, max_margin_loss.error_count
